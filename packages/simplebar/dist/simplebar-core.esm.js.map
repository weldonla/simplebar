{"version":3,"file":"simplebar-core.esm.js","sources":["../src/helpers.js","../src/scrollbar-width.js","../src/simplebar.js"],"sourcesContent":["// Helper function to retrieve options from element attributes\r\nexport const getOptions = function(obj) {\r\n  const options = Array.prototype.reduce.call(\r\n    obj,\r\n    (acc, attribute) => {\r\n      const option = attribute.name.match(/data-simplebar-(.+)/);\r\n      if (option) {\r\n        const key = option[1].replace(/\\W+(.)/g, (x, chr) => chr.toUpperCase());\r\n        switch (attribute.value) {\r\n          case 'true':\r\n            acc[key] = true;\r\n            break;\r\n          case 'false':\r\n            acc[key] = false;\r\n            break;\r\n          case undefined:\r\n            acc[key] = true;\r\n            break;\r\n          default:\r\n            acc[key] = attribute.value;\r\n        }\r\n      }\r\n      return acc;\r\n    },\r\n    {}\r\n  );\r\n  return options;\r\n};\r\n\r\nexport function getElementWindow(element) {\r\n  if (\r\n    !element ||\r\n    !element.ownerDocument ||\r\n    !element.ownerDocument.defaultView\r\n  ) {\r\n    return window;\r\n  }\r\n  return element.ownerDocument.defaultView;\r\n}\r\n\r\nexport function getElementDocument(element) {\r\n  if (!element || !element.ownerDocument) {\r\n    return document;\r\n  }\r\n  return element.ownerDocument;\r\n}\r\n","import canUseDOM from 'can-use-dom';\r\nimport { getElementDocument } from \"./helpers\";\r\n\r\nlet cachedScrollbarWidth = null;\r\nlet cachedDevicePixelRatio = null;\r\n\r\nif (canUseDOM) {\r\n  window.addEventListener('resize', () => {\r\n    if (cachedDevicePixelRatio !== window.devicePixelRatio) {\r\n      cachedDevicePixelRatio = window.devicePixelRatio;\r\n      cachedScrollbarWidth = null;\r\n    }\r\n  });\r\n}\r\n\r\nexport default function scrollbarWidth(el) {\r\n  if (cachedScrollbarWidth === null) {\r\n    \r\n    const document = getElementDocument(el);\r\n    \r\n    if (typeof document === 'undefined') {\r\n      cachedScrollbarWidth = 0;\r\n      return cachedScrollbarWidth;\r\n    }\r\n    const body = document.body;\r\n    const box = document.createElement('div');\r\n\r\n    box.classList.add('simplebar-hide-scrollbar');\r\n\r\n    body.appendChild(box);\r\n\r\n    const width = box.getBoundingClientRect().right;\r\n\r\n    body.removeChild(box);\r\n\r\n    cachedScrollbarWidth = width;\r\n  }\r\n\r\n  return cachedScrollbarWidth;\r\n}\r\n","import throttle from 'lodash.throttle';\r\nimport debounce from 'lodash.debounce';\r\nimport memoize from 'lodash.memoize';\r\nimport { ResizeObserver } from '@juggle/resize-observer';\r\nimport canUseDOM from 'can-use-dom';\r\nimport scrollbarWidth from './scrollbar-width';\r\nimport { getElementWindow, getElementDocument } from './helpers';\r\n\r\nexport default class SimpleBar {\r\n  constructor(element, options) {\r\n    this.el = element;\r\n    this.minScrollbarWidth = 20;\r\n    this.options = { ...SimpleBar.defaultOptions, ...options };\r\n    this.classNames = {\r\n      ...SimpleBar.defaultOptions.classNames,\r\n      ...this.options.classNames\r\n    };\r\n    this.axis = {\r\n      x: {\r\n        scrollOffsetAttr: 'scrollLeft',\r\n        sizeAttr: 'width',\r\n        scrollSizeAttr: 'scrollWidth',\r\n        offsetSizeAttr: 'offsetWidth',\r\n        offsetAttr: 'left',\r\n        overflowAttr: 'overflowX',\r\n        dragOffset: 0,\r\n        isOverflowing: true,\r\n        isVisible: false,\r\n        forceVisible: false,\r\n        track: {},\r\n        scrollbar: {}\r\n      },\r\n      y: {\r\n        scrollOffsetAttr: 'scrollTop',\r\n        sizeAttr: 'height',\r\n        scrollSizeAttr: 'scrollHeight',\r\n        offsetSizeAttr: 'offsetHeight',\r\n        offsetAttr: 'top',\r\n        overflowAttr: 'overflowY',\r\n        dragOffset: 0,\r\n        isOverflowing: true,\r\n        isVisible: false,\r\n        forceVisible: false,\r\n        track: {},\r\n        scrollbar: {}\r\n      }\r\n    };\r\n    this.removePreventClickId = null;\r\n\r\n    // Don't re-instantiate over an existing one\r\n    if (SimpleBar.instances.has(this.el)) {\r\n      return;\r\n    }\r\n\r\n    this.recalculate = throttle(this.recalculate.bind(this), this.options.recalculateThrottleWaitTime);\r\n    this.onMouseMove = throttle(this.onMouseMove.bind(this), 64);\r\n    this.hideScrollbars = debounce(\r\n      this.hideScrollbars.bind(this),\r\n      this.options.timeout\r\n    );\r\n    this.onWindowResize = debounce(this.onWindowResize.bind(this), 64, {\r\n      leading: true\r\n    });\r\n\r\n    SimpleBar.getRtlHelpers = memoize(SimpleBar.getRtlHelpers);\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Static properties\r\n   */\r\n\r\n  /**\r\n   * Helper to fix browsers inconsistency on RTL:\r\n   *  - Firefox inverts the scrollbar initial position\r\n   *  - IE11 inverts both scrollbar position and scrolling offset\r\n   * Directly inspired by @KingSora's OverlayScrollbars https://github.com/KingSora/OverlayScrollbars/blob/master/js/OverlayScrollbars.js#L1634\r\n   */\r\n  static getRtlHelpers() {\r\n    const dummyDiv = document.createElement('div');\r\n    dummyDiv.innerHTML =\r\n      '<div class=\"hs-dummy-scrollbar-size\"><div style=\"height: 200%; width: 200%; margin: 10px 0;\"></div></div>';\r\n    const scrollbarDummyEl = dummyDiv.firstElementChild;\r\n    document.body.appendChild(scrollbarDummyEl);\r\n    const dummyContainerChild = scrollbarDummyEl.firstElementChild;\r\n    scrollbarDummyEl.scrollLeft = 0;\r\n    const dummyContainerOffset = SimpleBar.getOffset(scrollbarDummyEl);\r\n    const dummyContainerChildOffset = SimpleBar.getOffset(dummyContainerChild);\r\n    scrollbarDummyEl.scrollLeft = 999;\r\n    const dummyContainerScrollOffsetAfterScroll = SimpleBar.getOffset(\r\n      dummyContainerChild\r\n    );\r\n\r\n    return {\r\n      // determines if the scrolling is responding with negative values\r\n      isRtlScrollingInverted:\r\n        dummyContainerOffset.left !== dummyContainerChildOffset.left &&\r\n        dummyContainerChildOffset.left -\r\n          dummyContainerScrollOffsetAfterScroll.left !==\r\n          0,\r\n      // determines if the origin scrollbar position is inverted or not (positioned on left or right)\r\n      isRtlScrollbarInverted:\r\n        dummyContainerOffset.left !== dummyContainerChildOffset.left\r\n    };\r\n  }\r\n\r\n  static defaultOptions = {\r\n    autoHide: true,\r\n    forceVisible: false,\r\n    clickOnTrack: true,\r\n    clickOnTrackSpeed: 40,\r\n    classNames: {\r\n      contentEl: 'simplebar-content',\r\n      contentWrapper: 'simplebar-content-wrapper',\r\n      offset: 'simplebar-offset',\r\n      mask: 'simplebar-mask',\r\n      wrapper: 'simplebar-wrapper',\r\n      placeholder: 'simplebar-placeholder',\r\n      scrollbar: 'simplebar-scrollbar',\r\n      track: 'simplebar-track',\r\n      heightAutoObserverWrapperEl: 'simplebar-height-auto-observer-wrapper',\r\n      heightAutoObserverEl: 'simplebar-height-auto-observer',\r\n      visible: 'simplebar-visible',\r\n      horizontal: 'simplebar-horizontal',\r\n      vertical: 'simplebar-vertical',\r\n      hover: 'simplebar-hover',\r\n      dragging: 'simplebar-dragging'\r\n    },\r\n    recalculateThrottleWaitTime: 170,\r\n    scrollbarMinSize: 25,\r\n    scrollbarMaxSize: 0,\r\n    timeout: 1000\r\n  };\r\n\r\n  static getOffset(el) {\r\n    const rect = el.getBoundingClientRect();\r\n    const elDocument = getElementDocument(el);\r\n    const elWindow = getElementWindow(el);\r\n\r\n    return {\r\n      top:\r\n        rect.top +\r\n        (elWindow.pageYOffset || elDocument.documentElement.scrollTop),\r\n      left:\r\n        rect.left +\r\n        (elWindow.pageXOffset || elDocument.documentElement.scrollLeft)\r\n    };\r\n  }\r\n\r\n  static instances = new WeakMap();\r\n\r\n  init() {\r\n    // Save a reference to the instance, so we know this DOM node has already been instancied\r\n    SimpleBar.instances.set(this.el, this);\r\n\r\n    // We stop here on server-side\r\n    if (canUseDOM) {\r\n      this.initDOM();\r\n\r\n      this.scrollbarWidth = this.getScrollbarWidth();\r\n\r\n      this.recalculate();\r\n\r\n      this.initListeners();\r\n    }\r\n  }\r\n\r\n  initDOM() {\r\n    // make sure this element doesn't have the elements yet\r\n    if (\r\n      Array.prototype.filter.call(this.el.children, child =>\r\n        child.classList.contains(this.classNames.wrapper)\r\n      ).length\r\n    ) {\r\n      // assume that element has his DOM already initiated\r\n      this.wrapperEl = this.el.querySelector(`.${this.classNames.wrapper}`);\r\n      this.contentWrapperEl =\r\n        this.options.scrollableNode ||\r\n        this.el.querySelector(`.${this.classNames.contentWrapper}`);\r\n      this.contentEl =\r\n        this.options.contentNode ||\r\n        this.el.querySelector(`.${this.classNames.contentEl}`);\r\n\r\n      this.offsetEl = this.el.querySelector(`.${this.classNames.offset}`);\r\n      this.maskEl = this.el.querySelector(`.${this.classNames.mask}`);\r\n\r\n      this.placeholderEl = this.findChild(\r\n        this.wrapperEl,\r\n        `.${this.classNames.placeholder}`\r\n      );\r\n      this.heightAutoObserverWrapperEl = this.el.querySelector(\r\n        `.${this.classNames.heightAutoObserverWrapperEl}`\r\n      );\r\n      this.heightAutoObserverEl = this.el.querySelector(\r\n        `.${this.classNames.heightAutoObserverEl}`\r\n      );\r\n      this.axis.x.track.el = this.findChild(\r\n        this.el,\r\n        `.${this.classNames.track}.${this.classNames.horizontal}`\r\n      );\r\n      this.axis.y.track.el = this.findChild(\r\n        this.el,\r\n        `.${this.classNames.track}.${this.classNames.vertical}`\r\n      );\r\n    } else {\r\n      // Prepare DOM\r\n      this.wrapperEl = document.createElement('div');\r\n      this.contentWrapperEl = document.createElement('div');\r\n      this.offsetEl = document.createElement('div');\r\n      this.maskEl = document.createElement('div');\r\n      this.contentEl = document.createElement('div');\r\n      this.placeholderEl = document.createElement('div');\r\n      this.heightAutoObserverWrapperEl = document.createElement('div');\r\n      this.heightAutoObserverEl = document.createElement('div');\r\n\r\n      this.wrapperEl.classList.add(this.classNames.wrapper);\r\n      this.contentWrapperEl.classList.add(this.classNames.contentWrapper);\r\n      this.offsetEl.classList.add(this.classNames.offset);\r\n      this.maskEl.classList.add(this.classNames.mask);\r\n      this.contentEl.classList.add(this.classNames.contentEl);\r\n      this.placeholderEl.classList.add(this.classNames.placeholder);\r\n      this.heightAutoObserverWrapperEl.classList.add(\r\n        this.classNames.heightAutoObserverWrapperEl\r\n      );\r\n      this.heightAutoObserverEl.classList.add(\r\n        this.classNames.heightAutoObserverEl\r\n      );\r\n\r\n      while (this.el.firstChild) {\r\n        this.contentEl.appendChild(this.el.firstChild);\r\n      }\r\n\r\n      this.contentWrapperEl.appendChild(this.contentEl);\r\n      this.offsetEl.appendChild(this.contentWrapperEl);\r\n      this.maskEl.appendChild(this.offsetEl);\r\n      this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl);\r\n      this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl);\r\n      this.wrapperEl.appendChild(this.maskEl);\r\n      this.wrapperEl.appendChild(this.placeholderEl);\r\n      this.el.appendChild(this.wrapperEl);\r\n    }\r\n\r\n    if (!this.axis.x.track.el || !this.axis.y.track.el) {\r\n      const track = document.createElement('div');\r\n      const scrollbar = document.createElement('div');\r\n\r\n      track.classList.add(this.classNames.track);\r\n      scrollbar.classList.add(this.classNames.scrollbar);\r\n\r\n      track.appendChild(scrollbar);\r\n\r\n      this.axis.x.track.el = track.cloneNode(true);\r\n      this.axis.x.track.el.classList.add(this.classNames.horizontal);\r\n\r\n      this.axis.y.track.el = track.cloneNode(true);\r\n      this.axis.y.track.el.classList.add(this.classNames.vertical);\r\n\r\n      this.el.appendChild(this.axis.x.track.el);\r\n      this.el.appendChild(this.axis.y.track.el);\r\n    }\r\n\r\n    this.axis.x.scrollbar.el = this.axis.x.track.el.querySelector(\r\n      `.${this.classNames.scrollbar}`\r\n    );\r\n    this.axis.y.scrollbar.el = this.axis.y.track.el.querySelector(\r\n      `.${this.classNames.scrollbar}`\r\n    );\r\n\r\n    if (!this.options.autoHide) {\r\n      this.axis.x.scrollbar.el.classList.add(this.classNames.visible);\r\n      this.axis.y.scrollbar.el.classList.add(this.classNames.visible);\r\n    }\r\n\r\n    this.el.setAttribute('data-simplebar', 'init');\r\n  }\r\n\r\n  initListeners() {\r\n    const elWindow = getElementWindow(this.el);\r\n    // Event listeners\r\n    if (this.options.autoHide) {\r\n      this.el.addEventListener('mouseenter', this.onMouseEnter);\r\n    }\r\n\r\n    ['mousedown', 'click', 'dblclick'].forEach(e => {\r\n      this.el.addEventListener(e, this.onPointerEvent, true);\r\n    });\r\n\r\n    ['touchstart', 'touchend', 'touchmove'].forEach(e => {\r\n      this.el.addEventListener(e, this.onPointerEvent, {\r\n        capture: true,\r\n        passive: true\r\n      });\r\n    });\r\n\r\n    this.el.addEventListener('mousemove', this.onMouseMove);\r\n    this.el.addEventListener('mouseleave', this.onMouseLeave);\r\n\r\n    this.contentWrapperEl.addEventListener('scroll', this.onScroll);\r\n\r\n    // Browser zoom triggers a window resize\r\n    elWindow.addEventListener('resize', this.onWindowResize);\r\n\r\n    // Hack for https://github.com/WICG/ResizeObserver/issues/38\r\n    let resizeObserverStarted = false;\r\n    const resizeObserver = elWindow.ResizeObserver || ResizeObserver;\r\n    this.resizeObserver = new resizeObserver(() => {\r\n      if (!resizeObserverStarted) return;\r\n      this.recalculate();\r\n    });\r\n\r\n    this.resizeObserver.observe(this.el);\r\n    this.resizeObserver.observe(this.contentEl);\r\n\r\n    elWindow.requestAnimationFrame(() => {\r\n      resizeObserverStarted = true;\r\n    });\r\n\r\n    // This is required to detect horizontal scroll. Vertical scroll only needs the resizeObserver.\r\n    this.mutationObserver = new elWindow.MutationObserver(this.recalculate);\r\n\r\n    this.mutationObserver.observe(this.contentEl, {\r\n      childList: true,\r\n      subtree: true,\r\n      characterData: true\r\n    });\r\n  }\r\n\r\n  recalculate() {\r\n    const elWindow = getElementWindow(this.el);\r\n    this.elStyles = elWindow.getComputedStyle(this.el);\r\n    this.isRtl = this.elStyles.direction === 'rtl';\r\n\r\n    const isHeightAuto = this.heightAutoObserverEl.offsetHeight <= 1;\r\n    const isWidthAuto = this.heightAutoObserverEl.offsetWidth <= 1;\r\n    const contentElOffsetWidth = this.contentEl.offsetWidth;\r\n\r\n    const contentWrapperElOffsetWidth = this.contentWrapperEl.offsetWidth;\r\n\r\n    const elOverflowX = this.elStyles.overflowX;\r\n    const elOverflowY = this.elStyles.overflowY;\r\n\r\n    this.contentEl.style.padding = `${this.elStyles.paddingTop} ${this.elStyles.paddingRight} ${this.elStyles.paddingBottom} ${this.elStyles.paddingLeft}`;\r\n    this.wrapperEl.style.margin = `-${this.elStyles.paddingTop} -${this.elStyles.paddingRight} -${this.elStyles.paddingBottom} -${this.elStyles.paddingLeft}`;\r\n\r\n    const contentElScrollHeight = this.contentEl.scrollHeight;\r\n    const contentElScrollWidth = this.contentEl.scrollWidth;\r\n\r\n    this.contentWrapperEl.style.height = isHeightAuto ? 'auto' : '100%';\r\n\r\n    // Determine placeholder size\r\n    this.placeholderEl.style.width = isWidthAuto\r\n      ? `${contentElOffsetWidth}px`\r\n      : 'auto';\r\n    this.placeholderEl.style.height = `${contentElScrollHeight}px`;\r\n\r\n    const contentWrapperElOffsetHeight = this.contentWrapperEl.offsetHeight;\r\n\r\n    this.axis.x.isOverflowing = contentElScrollWidth > contentElOffsetWidth;\r\n    this.axis.y.isOverflowing =\r\n      contentElScrollHeight > contentWrapperElOffsetHeight;\r\n\r\n    // Set isOverflowing to false if user explicitely set hidden overflow\r\n    this.axis.x.isOverflowing =\r\n      elOverflowX === 'hidden' ? false : this.axis.x.isOverflowing;\r\n    this.axis.y.isOverflowing =\r\n      elOverflowY === 'hidden' ? false : this.axis.y.isOverflowing;\r\n\r\n    this.axis.x.forceVisible =\r\n      this.options.forceVisible === 'x' || this.options.forceVisible === true;\r\n    this.axis.y.forceVisible =\r\n      this.options.forceVisible === 'y' || this.options.forceVisible === true;\r\n\r\n    this.hideNativeScrollbar();\r\n\r\n    // Set isOverflowing to false if scrollbar is not necessary (content is shorter than offset)\r\n    let offsetForXScrollbar = this.axis.x.isOverflowing\r\n      ? this.scrollbarWidth\r\n      : 0;\r\n    let offsetForYScrollbar = this.axis.y.isOverflowing\r\n      ? this.scrollbarWidth\r\n      : 0;\r\n\r\n    this.axis.x.isOverflowing =\r\n      this.axis.x.isOverflowing &&\r\n      contentElScrollWidth > contentWrapperElOffsetWidth - offsetForYScrollbar;\r\n    this.axis.y.isOverflowing =\r\n      this.axis.y.isOverflowing &&\r\n      contentElScrollHeight >\r\n        contentWrapperElOffsetHeight - offsetForXScrollbar;\r\n\r\n    this.axis.x.scrollbar.size = this.getScrollbarSize('x');\r\n    this.axis.y.scrollbar.size = this.getScrollbarSize('y');\r\n\r\n    this.axis.x.scrollbar.el.style.width = `${this.axis.x.scrollbar.size}px`;\r\n    this.axis.y.scrollbar.el.style.height = `${this.axis.y.scrollbar.size}px`;\r\n\r\n    this.positionScrollbar('x');\r\n    this.positionScrollbar('y');\r\n\r\n    this.toggleTrackVisibility('x');\r\n    this.toggleTrackVisibility('y');\r\n  }\r\n\r\n  /**\r\n   * Calculate scrollbar size\r\n   */\r\n  getScrollbarSize(axis = 'y') {\r\n    if (!this.axis[axis].isOverflowing) {\r\n      return 0;\r\n    }\r\n\r\n    const contentSize = this.contentEl[this.axis[axis].scrollSizeAttr];\r\n    const trackSize = this.axis[axis].track.el[this.axis[axis].offsetSizeAttr];\r\n    let scrollbarSize;\r\n\r\n    let scrollbarRatio = trackSize / contentSize;\r\n\r\n    // Calculate new height/position of drag handle.\r\n    scrollbarSize = Math.max(\r\n      ~~(scrollbarRatio * trackSize),\r\n      this.options.scrollbarMinSize\r\n    );\r\n\r\n    if (this.options.scrollbarMaxSize) {\r\n      scrollbarSize = Math.min(scrollbarSize, this.options.scrollbarMaxSize);\r\n    }\r\n\r\n    return scrollbarSize;\r\n  }\r\n\r\n  positionScrollbar(axis = 'y') {\r\n    if (!this.axis[axis].isOverflowing) {\r\n      return;\r\n    }\r\n\r\n    const contentSize = this.contentWrapperEl[this.axis[axis].scrollSizeAttr];\r\n    const trackSize = this.axis[axis].track.el[this.axis[axis].offsetSizeAttr];\r\n    const hostSize = parseInt(this.elStyles[this.axis[axis].sizeAttr], 10);\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n\r\n    let scrollOffset = this.contentWrapperEl[this.axis[axis].scrollOffsetAttr];\r\n    scrollOffset =\r\n      axis === 'x' &&\r\n      this.isRtl &&\r\n      SimpleBar.getRtlHelpers().isRtlScrollingInverted\r\n        ? -scrollOffset\r\n        : scrollOffset;\r\n    let scrollPourcent = scrollOffset / (contentSize - hostSize);\r\n\r\n    let handleOffset = ~~((trackSize - scrollbar.size) * scrollPourcent);\r\n    handleOffset =\r\n      axis === 'x' &&\r\n      this.isRtl &&\r\n      SimpleBar.getRtlHelpers().isRtlScrollbarInverted\r\n        ? handleOffset + (trackSize - scrollbar.size)\r\n        : handleOffset;\r\n\r\n    scrollbar.el.style.transform =\r\n      axis === 'x'\r\n        ? `translate3d(${handleOffset}px, 0, 0)`\r\n        : `translate3d(0, ${handleOffset}px, 0)`;\r\n  }\r\n\r\n  toggleTrackVisibility(axis = 'y') {\r\n    const track = this.axis[axis].track.el;\r\n    const scrollbar = this.axis[axis].scrollbar.el;\r\n\r\n    if (this.axis[axis].isOverflowing || this.axis[axis].forceVisible) {\r\n      track.style.visibility = 'visible';\r\n      this.contentWrapperEl.style[this.axis[axis].overflowAttr] = 'scroll';\r\n    } else {\r\n      track.style.visibility = 'hidden';\r\n      this.contentWrapperEl.style[this.axis[axis].overflowAttr] = 'hidden';\r\n    }\r\n\r\n    // Even if forceVisible is enabled, scrollbar itself should be hidden\r\n    if (this.axis[axis].isOverflowing) {\r\n      scrollbar.style.display = 'block';\r\n    } else {\r\n      scrollbar.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  hideNativeScrollbar() {\r\n    this.offsetEl.style[this.isRtl ? 'left' : 'right'] =\r\n      this.axis.y.isOverflowing || this.axis.y.forceVisible\r\n        ? `-${this.scrollbarWidth}px`\r\n        : 0;\r\n    this.offsetEl.style.bottom =\r\n      this.axis.x.isOverflowing || this.axis.x.forceVisible\r\n        ? `-${this.scrollbarWidth}px`\r\n        : 0;\r\n  }\r\n\r\n  /**\r\n   * On scroll event handling\r\n   */\r\n  onScroll = () => {\r\n    const elWindow = getElementWindow(this.el);\r\n    if (!this.scrollXTicking) {\r\n      elWindow.requestAnimationFrame(this.scrollX);\r\n      this.scrollXTicking = true;\r\n    }\r\n\r\n    if (!this.scrollYTicking) {\r\n      elWindow.requestAnimationFrame(this.scrollY);\r\n      this.scrollYTicking = true;\r\n    }\r\n  };\r\n\r\n  scrollX = () => {\r\n    if (this.axis.x.isOverflowing) {\r\n      this.showScrollbar('x');\r\n      this.positionScrollbar('x');\r\n    }\r\n\r\n    this.scrollXTicking = false;\r\n  };\r\n\r\n  scrollY = () => {\r\n    if (this.axis.y.isOverflowing) {\r\n      this.showScrollbar('y');\r\n      this.positionScrollbar('y');\r\n    }\r\n\r\n    this.scrollYTicking = false;\r\n  };\r\n\r\n  onMouseEnter = () => {\r\n    this.showScrollbar('x');\r\n    this.showScrollbar('y');\r\n  };\r\n\r\n  onMouseMove = e => {\r\n    this.mouseX = e.clientX;\r\n    this.mouseY = e.clientY;\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      this.onMouseMoveForAxis('x');\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      this.onMouseMoveForAxis('y');\r\n    }\r\n  };\r\n\r\n  onMouseMoveForAxis(axis = 'y') {\r\n    this.axis[axis].track.rect = this.axis[\r\n      axis\r\n    ].track.el.getBoundingClientRect();\r\n    this.axis[axis].scrollbar.rect = this.axis[\r\n      axis\r\n    ].scrollbar.el.getBoundingClientRect();\r\n\r\n    const isWithinScrollbarBoundsX = this.isWithinBounds(\r\n      this.axis[axis].scrollbar.rect\r\n    );\r\n\r\n    if (isWithinScrollbarBoundsX) {\r\n      this.axis[axis].scrollbar.el.classList.add(this.classNames.hover);\r\n    } else {\r\n      this.axis[axis].scrollbar.el.classList.remove(this.classNames.hover);\r\n    }\r\n\r\n    if (this.isWithinBounds(this.axis[axis].track.rect)) {\r\n      this.showScrollbar(axis);\r\n      this.axis[axis].track.el.classList.add(this.classNames.hover);\r\n    } else {\r\n      this.axis[axis].track.el.classList.remove(this.classNames.hover);\r\n    }\r\n  }\r\n\r\n  onMouseLeave = () => {\r\n    this.onMouseMove.cancel();\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      this.onMouseLeaveForAxis('x');\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      this.onMouseLeaveForAxis('y');\r\n    }\r\n\r\n    this.mouseX = -1;\r\n    this.mouseY = -1;\r\n  };\r\n\r\n  onMouseLeaveForAxis(axis = 'y') {\r\n    this.axis[axis].track.el.classList.remove(this.classNames.hover);\r\n    this.axis[axis].scrollbar.el.classList.remove(this.classNames.hover);\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    // Recalculate scrollbarWidth in case it's a zoom\r\n    this.scrollbarWidth = this.getScrollbarWidth();\r\n\r\n    this.hideNativeScrollbar();\r\n  };\r\n\r\n  /**\r\n   * Show scrollbar\r\n   */\r\n  showScrollbar(axis = 'y') {\r\n    let scrollbar = this.axis[axis].scrollbar.el;\r\n\r\n    if (!this.axis[axis].isVisible) {\r\n      scrollbar.classList.add(this.classNames.visible);\r\n      this.axis[axis].isVisible = true;\r\n    }\r\n\r\n    if (this.options.autoHide) {\r\n      this.hideScrollbars();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide Scrollbar\r\n   */\r\n  hideScrollbars = () => {\r\n    this.axis.x.track.rect = this.axis.x.track.el.getBoundingClientRect();\r\n    this.axis.y.track.rect = this.axis.y.track.el.getBoundingClientRect();\r\n\r\n    if (!this.isWithinBounds(this.axis.y.track.rect)) {\r\n      this.axis.y.scrollbar.el.classList.remove(this.classNames.visible);\r\n      this.axis.y.isVisible = false;\r\n    }\r\n\r\n    if (!this.isWithinBounds(this.axis.x.track.rect)) {\r\n      this.axis.x.scrollbar.el.classList.remove(this.classNames.visible);\r\n      this.axis.x.isVisible = false;\r\n    }\r\n  };\r\n\r\n  onPointerEvent = e => {\r\n    let isWithinTrackXBounds, isWithinTrackYBounds;\r\n\r\n    this.axis.x.track.rect = this.axis.x.track.el.getBoundingClientRect();\r\n    this.axis.y.track.rect = this.axis.y.track.el.getBoundingClientRect();\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      isWithinTrackXBounds = this.isWithinBounds(this.axis.x.track.rect);\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      isWithinTrackYBounds = this.isWithinBounds(this.axis.y.track.rect);\r\n    }\r\n\r\n    // If any pointer event is called on the scrollbar\r\n    if (isWithinTrackXBounds || isWithinTrackYBounds) {\r\n      // Preventing the event's default action stops text being\r\n      // selectable during the drag.\r\n      e.preventDefault();\r\n      // Prevent event leaking\r\n      e.stopPropagation();\r\n\r\n      if (e.type === 'mousedown') {\r\n        if (isWithinTrackXBounds) {\r\n          this.axis.x.scrollbar.rect = this.axis.x.scrollbar.el.getBoundingClientRect();\r\n\r\n          if (this.isWithinBounds(this.axis.x.scrollbar.rect)) {\r\n            this.onDragStart(e, 'x');\r\n          } else {\r\n            this.onTrackClick(e, 'x');\r\n          }\r\n        }\r\n\r\n        if (isWithinTrackYBounds) {\r\n          this.axis.y.scrollbar.rect = this.axis.y.scrollbar.el.getBoundingClientRect();\r\n\r\n          if (this.isWithinBounds(this.axis.y.scrollbar.rect)) {\r\n            this.onDragStart(e, 'y');\r\n          } else {\r\n            this.onTrackClick(e, 'y');\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * on scrollbar handle drag movement starts\r\n   */\r\n  onDragStart(e, axis = 'y') {\r\n    const elDocument = getElementDocument(this.el);\r\n    const elWindow = getElementWindow(this.el);\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n\r\n    // Measure how far the user's mouse is from the top of the scrollbar drag handle.\r\n    const eventOffset = axis === 'y' ? e.pageY : e.pageX;\r\n    this.axis[axis].dragOffset =\r\n      eventOffset - scrollbar.rect[this.axis[axis].offsetAttr];\r\n    this.draggedAxis = axis;\r\n\r\n    this.el.classList.add(this.classNames.dragging);\r\n\r\n    elDocument.addEventListener('mousemove', this.drag, true);\r\n    elDocument.addEventListener('mouseup', this.onEndDrag, true);\r\n    if (this.removePreventClickId === null) {\r\n      elDocument.addEventListener('click', this.preventClick, true);\r\n      elDocument.addEventListener('dblclick', this.preventClick, true);\r\n    } else {\r\n      elWindow.clearTimeout(this.removePreventClickId);\r\n      this.removePreventClickId = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Drag scrollbar handle\r\n   */\r\n  drag = e => {\r\n    let eventOffset;\r\n    const track = this.axis[this.draggedAxis].track;\r\n    const trackSize = track.rect[this.axis[this.draggedAxis].sizeAttr];\r\n    const scrollbar = this.axis[this.draggedAxis].scrollbar;\r\n    const contentSize = this.contentWrapperEl[\r\n      this.axis[this.draggedAxis].scrollSizeAttr\r\n    ];\r\n    const hostSize = parseInt(\r\n      this.elStyles[this.axis[this.draggedAxis].sizeAttr],\r\n      10\r\n    );\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (this.draggedAxis === 'y') {\r\n      eventOffset = e.pageY;\r\n    } else {\r\n      eventOffset = e.pageX;\r\n    }\r\n\r\n    // Calculate how far the user's mouse is from the top/left of the scrollbar (minus the dragOffset).\r\n    let dragPos =\r\n      eventOffset -\r\n      track.rect[this.axis[this.draggedAxis].offsetAttr] -\r\n      this.axis[this.draggedAxis].dragOffset;\r\n    // Convert the mouse position into a percentage of the scrollbar height/width.\r\n    let dragPerc = dragPos / (trackSize - scrollbar.size);\r\n\r\n    // Scroll the content by the same percentage.\r\n    let scrollPos = dragPerc * (contentSize - hostSize);\r\n\r\n    // Fix browsers inconsistency on RTL\r\n    if (this.draggedAxis === 'x') {\r\n      scrollPos =\r\n        this.isRtl && SimpleBar.getRtlHelpers().isRtlScrollbarInverted\r\n          ? scrollPos - (trackSize + scrollbar.size)\r\n          : scrollPos;\r\n      scrollPos =\r\n        this.isRtl && SimpleBar.getRtlHelpers().isRtlScrollingInverted\r\n          ? -scrollPos\r\n          : scrollPos;\r\n    }\r\n\r\n    this.contentWrapperEl[\r\n      this.axis[this.draggedAxis].scrollOffsetAttr\r\n    ] = scrollPos;\r\n  };\r\n\r\n  /**\r\n   * End scroll handle drag\r\n   */\r\n  onEndDrag = e => {\r\n    const elDocument = getElementDocument(this.el);\r\n    const elWindow = getElementWindow(this.el);\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.el.classList.remove(this.classNames.dragging);\r\n\r\n    elDocument.removeEventListener('mousemove', this.drag, true);\r\n    elDocument.removeEventListener('mouseup', this.onEndDrag, true);\r\n    this.removePreventClickId = elWindow.setTimeout(() => {\r\n      // Remove these asynchronously so we still suppress click events\r\n      // generated simultaneously with mouseup.\r\n      elDocument.removeEventListener('click', this.preventClick, true);\r\n      elDocument.removeEventListener('dblclick', this.preventClick, true);\r\n      this.removePreventClickId = null;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Handler to ignore click events during drag\r\n   */\r\n  preventClick = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  onTrackClick(e, axis = 'y') {\r\n    if (!this.options.clickOnTrack) return;\r\n\r\n    const elWindow = getElementWindow(this.el);\r\n    this.axis[axis].scrollbar.rect = this.axis[\r\n      axis\r\n    ].scrollbar.el.getBoundingClientRect();\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n    const scrollbarOffset = scrollbar.rect[this.axis[axis].offsetAttr];\r\n    const hostSize = parseInt(this.elStyles[this.axis[axis].sizeAttr], 10);\r\n    let scrolled = this.contentWrapperEl[this.axis[axis].scrollOffsetAttr];\r\n    const t =\r\n      axis === 'y'\r\n        ? this.mouseY - scrollbarOffset\r\n        : this.mouseX - scrollbarOffset;\r\n    const dir = t < 0 ? -1 : 1;\r\n    const scrollSize = dir === -1 ? scrolled - hostSize : scrolled + hostSize;\r\n\r\n    const scrollTo = () => {\r\n      if (dir === -1) {\r\n        if (scrolled > scrollSize) {\r\n          scrolled -= this.options.clickOnTrackSpeed;\r\n          this.contentWrapperEl.scrollTo({\r\n            [this.axis[axis].offsetAttr]: scrolled\r\n          });\r\n          elWindow.requestAnimationFrame(scrollTo);\r\n        }\r\n      } else {\r\n        if (scrolled < scrollSize) {\r\n          scrolled += this.options.clickOnTrackSpeed;\r\n          this.contentWrapperEl.scrollTo({\r\n            [this.axis[axis].offsetAttr]: scrolled\r\n          });\r\n          elWindow.requestAnimationFrame(scrollTo);\r\n        }\r\n      }\r\n    };\r\n\r\n    scrollTo();\r\n  }\r\n\r\n  /**\r\n   * Getter for content element\r\n   */\r\n  getContentElement() {\r\n    return this.contentEl;\r\n  }\r\n\r\n  /**\r\n   * Getter for original scrolling element\r\n   */\r\n  getScrollElement() {\r\n    return this.contentWrapperEl;\r\n  }\r\n\r\n  getScrollbarWidth() {\r\n    // Try/catch for FF 56 throwing on undefined computedStyles\r\n    try {\r\n      // Detect browsers supporting CSS scrollbar styling and do not calculate\r\n      if (\r\n        getComputedStyle(this.contentWrapperEl, '::-webkit-scrollbar')\r\n          .display === 'none' ||\r\n        'scrollbarWidth' in document.documentElement.style ||\r\n        '-ms-overflow-style' in document.documentElement.style\r\n      ) {\r\n        return 0;\r\n      } else {\r\n        return scrollbarWidth(this.el);\r\n      }\r\n    } catch (e) {\r\n      return scrollbarWidth(this.el);\r\n    }\r\n  }\r\n\r\n  removeListeners() {\r\n    const elWindow = getElementWindow(this.el);\r\n    // Event listeners\r\n    if (this.options.autoHide) {\r\n      this.el.removeEventListener('mouseenter', this.onMouseEnter);\r\n    }\r\n\r\n    ['mousedown', 'click', 'dblclick'].forEach(e => {\r\n      this.el.removeEventListener(e, this.onPointerEvent, true);\r\n    });\r\n\r\n    ['touchstart', 'touchend', 'touchmove'].forEach(e => {\r\n      this.el.removeEventListener(e, this.onPointerEvent, {\r\n        capture: true,\r\n        passive: true\r\n      });\r\n    });\r\n\r\n    this.el.removeEventListener('mousemove', this.onMouseMove);\r\n    this.el.removeEventListener('mouseleave', this.onMouseLeave);\r\n\r\n    if (this.contentWrapperEl) {\r\n      this.contentWrapperEl.removeEventListener('scroll', this.onScroll);\r\n    }\r\n\r\n    elWindow.removeEventListener('resize', this.onWindowResize);\r\n\r\n    if (this.mutationObserver) {\r\n      this.mutationObserver.disconnect();\r\n    }\r\n\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n    }\r\n\r\n    // Cancel all debounced functions\r\n    this.recalculate.cancel();\r\n    this.onMouseMove.cancel();\r\n    this.hideScrollbars.cancel();\r\n    this.onWindowResize.cancel();\r\n  }\r\n\r\n  /**\r\n   * UnMount mutation observer and delete SimpleBar instance from DOM element\r\n   */\r\n  unMount() {\r\n    this.removeListeners();\r\n    SimpleBar.instances.delete(this.el);\r\n  }\r\n\r\n  /**\r\n   * Check if mouse is within bounds\r\n   */\r\n  isWithinBounds(bbox) {\r\n    return (\r\n      this.mouseX >= bbox.left &&\r\n      this.mouseX <= bbox.left + bbox.width &&\r\n      this.mouseY >= bbox.top &&\r\n      this.mouseY <= bbox.top + bbox.height\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Find element children matches query\r\n   */\r\n  findChild(el, query) {\r\n    const matches =\r\n      el.matches ||\r\n      el.webkitMatchesSelector ||\r\n      el.mozMatchesSelector ||\r\n      el.msMatchesSelector;\r\n    return Array.prototype.filter.call(el.children, child =>\r\n      matches.call(child, query)\r\n    )[0];\r\n  }\r\n}\r\n"],"names":["getElementWindow","element","ownerDocument","defaultView","window","getElementDocument","document","cachedScrollbarWidth","cachedDevicePixelRatio","canUseDOM","addEventListener","devicePixelRatio","scrollbarWidth","el","body","box","createElement","classList","add","appendChild","width","getBoundingClientRect","right","removeChild","SimpleBar","options","onScroll","elWindow","scrollXTicking","requestAnimationFrame","scrollX","scrollYTicking","scrollY","axis","x","isOverflowing","showScrollbar","positionScrollbar","y","onMouseEnter","onMouseMove","e","mouseX","clientX","mouseY","clientY","forceVisible","onMouseMoveForAxis","onMouseLeave","cancel","onMouseLeaveForAxis","onWindowResize","getScrollbarWidth","hideNativeScrollbar","hideScrollbars","track","rect","isWithinBounds","scrollbar","remove","classNames","visible","isVisible","onPointerEvent","isWithinTrackXBounds","isWithinTrackYBounds","preventDefault","stopPropagation","type","onDragStart","onTrackClick","drag","eventOffset","draggedAxis","trackSize","sizeAttr","contentSize","contentWrapperEl","scrollSizeAttr","hostSize","parseInt","elStyles","pageY","pageX","dragPos","offsetAttr","dragOffset","dragPerc","size","scrollPos","isRtl","getRtlHelpers","isRtlScrollbarInverted","isRtlScrollingInverted","scrollOffsetAttr","onEndDrag","elDocument","dragging","removeEventListener","removePreventClickId","setTimeout","preventClick","minScrollbarWidth","defaultOptions","offsetSizeAttr","overflowAttr","instances","has","recalculate","throttle","bind","recalculateThrottleWaitTime","debounce","timeout","leading","memoize","init","dummyDiv","innerHTML","scrollbarDummyEl","firstElementChild","dummyContainerChild","scrollLeft","dummyContainerOffset","getOffset","dummyContainerChildOffset","dummyContainerScrollOffsetAfterScroll","left","top","pageYOffset","documentElement","scrollTop","pageXOffset","set","initDOM","initListeners","Array","prototype","filter","call","children","child","contains","wrapper","length","wrapperEl","querySelector","scrollableNode","contentWrapper","contentEl","contentNode","offsetEl","offset","maskEl","mask","placeholderEl","findChild","placeholder","heightAutoObserverWrapperEl","heightAutoObserverEl","horizontal","vertical","firstChild","cloneNode","autoHide","setAttribute","forEach","capture","passive","resizeObserverStarted","resizeObserver","ResizeObserver","observe","mutationObserver","MutationObserver","childList","subtree","characterData","getComputedStyle","direction","isHeightAuto","offsetHeight","isWidthAuto","offsetWidth","contentElOffsetWidth","contentWrapperElOffsetWidth","elOverflowX","overflowX","elOverflowY","overflowY","style","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","contentElScrollHeight","scrollHeight","contentElScrollWidth","scrollWidth","height","contentWrapperElOffsetHeight","offsetForXScrollbar","offsetForYScrollbar","getScrollbarSize","toggleTrackVisibility","scrollbarSize","scrollbarRatio","Math","max","scrollbarMinSize","scrollbarMaxSize","min","scrollOffset","scrollPourcent","handleOffset","transform","visibility","display","bottom","isWithinScrollbarBoundsX","hover","clearTimeout","clickOnTrack","scrollbarOffset","scrolled","t","dir","scrollSize","scrollTo","clickOnTrackSpeed","getContentElement","getScrollElement","removeListeners","disconnect","unMount","delete","bbox","query","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","WeakMap"],"mappings":"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"}
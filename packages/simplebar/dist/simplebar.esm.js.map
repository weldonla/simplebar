{"version":3,"file":"simplebar.esm.js","sources":["../src/helpers.js","../src/scrollbar-width.js","../src/simplebar.js","../src/index.js"],"sourcesContent":["// Helper function to retrieve options from element attributes\r\nexport const getOptions = function(obj) {\r\n  const options = Array.prototype.reduce.call(\r\n    obj,\r\n    (acc, attribute) => {\r\n      const option = attribute.name.match(/data-simplebar-(.+)/);\r\n      if (option) {\r\n        const key = option[1].replace(/\\W+(.)/g, (x, chr) => chr.toUpperCase());\r\n        switch (attribute.value) {\r\n          case 'true':\r\n            acc[key] = true;\r\n            break;\r\n          case 'false':\r\n            acc[key] = false;\r\n            break;\r\n          case undefined:\r\n            acc[key] = true;\r\n            break;\r\n          default:\r\n            acc[key] = attribute.value;\r\n        }\r\n      }\r\n      return acc;\r\n    },\r\n    {}\r\n  );\r\n  return options;\r\n};\r\n\r\nexport function getElementWindow(element) {\r\n  if (\r\n    !element ||\r\n    !element.ownerDocument ||\r\n    !element.ownerDocument.defaultView\r\n  ) {\r\n    return window;\r\n  }\r\n  return element.ownerDocument.defaultView;\r\n}\r\n\r\nexport function getElementDocument(element) {\r\n  if (!element || !element.ownerDocument) {\r\n    return document;\r\n  }\r\n  return element.ownerDocument;\r\n}\r\n","import canUseDOM from 'can-use-dom';\r\nimport { getElementDocument } from \"./helpers\";\r\n\r\nlet cachedScrollbarWidth = null;\r\nlet cachedDevicePixelRatio = null;\r\n\r\nif (canUseDOM) {\r\n  window.addEventListener('resize', () => {\r\n    if (cachedDevicePixelRatio !== window.devicePixelRatio) {\r\n      cachedDevicePixelRatio = window.devicePixelRatio;\r\n      cachedScrollbarWidth = null;\r\n    }\r\n  });\r\n}\r\n\r\nexport default function scrollbarWidth(el) {\r\n  if (cachedScrollbarWidth === null) {\r\n    \r\n    const document = getElementDocument(el);\r\n    \r\n    if (typeof document === 'undefined') {\r\n      cachedScrollbarWidth = 0;\r\n      return cachedScrollbarWidth;\r\n    }\r\n    const body = document.body;\r\n    const box = document.createElement('div');\r\n\r\n    box.classList.add('simplebar-hide-scrollbar');\r\n\r\n    body.appendChild(box);\r\n\r\n    const width = box.getBoundingClientRect().right;\r\n\r\n    body.removeChild(box);\r\n\r\n    cachedScrollbarWidth = width;\r\n  }\r\n\r\n  return cachedScrollbarWidth;\r\n}\r\n","import throttle from 'lodash.throttle';\r\nimport debounce from 'lodash.debounce';\r\nimport memoize from 'lodash.memoize';\r\nimport { ResizeObserver } from '@juggle/resize-observer';\r\nimport canUseDOM from 'can-use-dom';\r\nimport scrollbarWidth from './scrollbar-width';\r\nimport { getElementWindow, getElementDocument } from './helpers';\r\n\r\nexport default class SimpleBar {\r\n  constructor(element, options) {\r\n    this.el = element;\r\n    this.minScrollbarWidth = 20;\r\n    this.options = { ...SimpleBar.defaultOptions, ...options };\r\n    this.classNames = {\r\n      ...SimpleBar.defaultOptions.classNames,\r\n      ...this.options.classNames\r\n    };\r\n    this.axis = {\r\n      x: {\r\n        scrollOffsetAttr: 'scrollLeft',\r\n        sizeAttr: 'width',\r\n        scrollSizeAttr: 'scrollWidth',\r\n        offsetSizeAttr: 'offsetWidth',\r\n        offsetAttr: 'left',\r\n        overflowAttr: 'overflowX',\r\n        dragOffset: 0,\r\n        isOverflowing: true,\r\n        isVisible: false,\r\n        forceVisible: false,\r\n        track: {},\r\n        scrollbar: {}\r\n      },\r\n      y: {\r\n        scrollOffsetAttr: 'scrollTop',\r\n        sizeAttr: 'height',\r\n        scrollSizeAttr: 'scrollHeight',\r\n        offsetSizeAttr: 'offsetHeight',\r\n        offsetAttr: 'top',\r\n        overflowAttr: 'overflowY',\r\n        dragOffset: 0,\r\n        isOverflowing: true,\r\n        isVisible: false,\r\n        forceVisible: false,\r\n        track: {},\r\n        scrollbar: {}\r\n      }\r\n    };\r\n    this.removePreventClickId = null;\r\n\r\n    // Don't re-instantiate over an existing one\r\n    if (SimpleBar.instances.has(this.el)) {\r\n      return;\r\n    }\r\n\r\n    this.recalculate = throttle(this.recalculate.bind(this), this.options.recalculateThrottleWaitTime);\r\n    this.onMouseMove = throttle(this.onMouseMove.bind(this), 64);\r\n    this.hideScrollbars = debounce(\r\n      this.hideScrollbars.bind(this),\r\n      this.options.timeout\r\n    );\r\n    this.onWindowResize = debounce(this.onWindowResize.bind(this), 64, {\r\n      leading: true\r\n    });\r\n\r\n    SimpleBar.getRtlHelpers = memoize(SimpleBar.getRtlHelpers);\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Static properties\r\n   */\r\n\r\n  /**\r\n   * Helper to fix browsers inconsistency on RTL:\r\n   *  - Firefox inverts the scrollbar initial position\r\n   *  - IE11 inverts both scrollbar position and scrolling offset\r\n   * Directly inspired by @KingSora's OverlayScrollbars https://github.com/KingSora/OverlayScrollbars/blob/master/js/OverlayScrollbars.js#L1634\r\n   */\r\n  static getRtlHelpers() {\r\n    const dummyDiv = document.createElement('div');\r\n    dummyDiv.innerHTML =\r\n      '<div class=\"hs-dummy-scrollbar-size\"><div style=\"height: 200%; width: 200%; margin: 10px 0;\"></div></div>';\r\n    const scrollbarDummyEl = dummyDiv.firstElementChild;\r\n    document.body.appendChild(scrollbarDummyEl);\r\n    const dummyContainerChild = scrollbarDummyEl.firstElementChild;\r\n    scrollbarDummyEl.scrollLeft = 0;\r\n    const dummyContainerOffset = SimpleBar.getOffset(scrollbarDummyEl);\r\n    const dummyContainerChildOffset = SimpleBar.getOffset(dummyContainerChild);\r\n    scrollbarDummyEl.scrollLeft = 999;\r\n    const dummyContainerScrollOffsetAfterScroll = SimpleBar.getOffset(\r\n      dummyContainerChild\r\n    );\r\n\r\n    return {\r\n      // determines if the scrolling is responding with negative values\r\n      isRtlScrollingInverted:\r\n        dummyContainerOffset.left !== dummyContainerChildOffset.left &&\r\n        dummyContainerChildOffset.left -\r\n          dummyContainerScrollOffsetAfterScroll.left !==\r\n          0,\r\n      // determines if the origin scrollbar position is inverted or not (positioned on left or right)\r\n      isRtlScrollbarInverted:\r\n        dummyContainerOffset.left !== dummyContainerChildOffset.left\r\n    };\r\n  }\r\n\r\n  static defaultOptions = {\r\n    autoHide: true,\r\n    forceVisible: false,\r\n    clickOnTrack: true,\r\n    clickOnTrackSpeed: 40,\r\n    classNames: {\r\n      contentEl: 'simplebar-content',\r\n      contentWrapper: 'simplebar-content-wrapper',\r\n      offset: 'simplebar-offset',\r\n      mask: 'simplebar-mask',\r\n      wrapper: 'simplebar-wrapper',\r\n      placeholder: 'simplebar-placeholder',\r\n      scrollbar: 'simplebar-scrollbar',\r\n      track: 'simplebar-track',\r\n      heightAutoObserverWrapperEl: 'simplebar-height-auto-observer-wrapper',\r\n      heightAutoObserverEl: 'simplebar-height-auto-observer',\r\n      visible: 'simplebar-visible',\r\n      horizontal: 'simplebar-horizontal',\r\n      vertical: 'simplebar-vertical',\r\n      hover: 'simplebar-hover',\r\n      dragging: 'simplebar-dragging'\r\n    },\r\n    recalculateThrottleWaitTime: 170,\r\n    scrollbarMinSize: 25,\r\n    scrollbarMaxSize: 0,\r\n    timeout: 1000\r\n  };\r\n\r\n  static getOffset(el) {\r\n    const rect = el.getBoundingClientRect();\r\n    const elDocument = getElementDocument(el);\r\n    const elWindow = getElementWindow(el);\r\n\r\n    return {\r\n      top:\r\n        rect.top +\r\n        (elWindow.pageYOffset || elDocument.documentElement.scrollTop),\r\n      left:\r\n        rect.left +\r\n        (elWindow.pageXOffset || elDocument.documentElement.scrollLeft)\r\n    };\r\n  }\r\n\r\n  static instances = new WeakMap();\r\n\r\n  init() {\r\n    // Save a reference to the instance, so we know this DOM node has already been instancied\r\n    SimpleBar.instances.set(this.el, this);\r\n\r\n    // We stop here on server-side\r\n    if (canUseDOM) {\r\n      this.initDOM();\r\n\r\n      this.scrollbarWidth = this.getScrollbarWidth();\r\n\r\n      this.recalculate();\r\n\r\n      this.initListeners();\r\n    }\r\n  }\r\n\r\n  initDOM() {\r\n    // make sure this element doesn't have the elements yet\r\n    if (\r\n      Array.prototype.filter.call(this.el.children, child =>\r\n        child.classList.contains(this.classNames.wrapper)\r\n      ).length\r\n    ) {\r\n      // assume that element has his DOM already initiated\r\n      this.wrapperEl = this.el.querySelector(`.${this.classNames.wrapper}`);\r\n      this.contentWrapperEl =\r\n        this.options.scrollableNode ||\r\n        this.el.querySelector(`.${this.classNames.contentWrapper}`);\r\n      this.contentEl =\r\n        this.options.contentNode ||\r\n        this.el.querySelector(`.${this.classNames.contentEl}`);\r\n\r\n      this.offsetEl = this.el.querySelector(`.${this.classNames.offset}`);\r\n      this.maskEl = this.el.querySelector(`.${this.classNames.mask}`);\r\n\r\n      this.placeholderEl = this.findChild(\r\n        this.wrapperEl,\r\n        `.${this.classNames.placeholder}`\r\n      );\r\n      this.heightAutoObserverWrapperEl = this.el.querySelector(\r\n        `.${this.classNames.heightAutoObserverWrapperEl}`\r\n      );\r\n      this.heightAutoObserverEl = this.el.querySelector(\r\n        `.${this.classNames.heightAutoObserverEl}`\r\n      );\r\n      this.axis.x.track.el = this.findChild(\r\n        this.el,\r\n        `.${this.classNames.track}.${this.classNames.horizontal}`\r\n      );\r\n      this.axis.y.track.el = this.findChild(\r\n        this.el,\r\n        `.${this.classNames.track}.${this.classNames.vertical}`\r\n      );\r\n    } else {\r\n      // Prepare DOM\r\n      this.wrapperEl = document.createElement('div');\r\n      this.contentWrapperEl = document.createElement('div');\r\n      this.offsetEl = document.createElement('div');\r\n      this.maskEl = document.createElement('div');\r\n      this.contentEl = document.createElement('div');\r\n      this.placeholderEl = document.createElement('div');\r\n      this.heightAutoObserverWrapperEl = document.createElement('div');\r\n      this.heightAutoObserverEl = document.createElement('div');\r\n\r\n      this.wrapperEl.classList.add(this.classNames.wrapper);\r\n      this.contentWrapperEl.classList.add(this.classNames.contentWrapper);\r\n      this.offsetEl.classList.add(this.classNames.offset);\r\n      this.maskEl.classList.add(this.classNames.mask);\r\n      this.contentEl.classList.add(this.classNames.contentEl);\r\n      this.placeholderEl.classList.add(this.classNames.placeholder);\r\n      this.heightAutoObserverWrapperEl.classList.add(\r\n        this.classNames.heightAutoObserverWrapperEl\r\n      );\r\n      this.heightAutoObserverEl.classList.add(\r\n        this.classNames.heightAutoObserverEl\r\n      );\r\n\r\n      while (this.el.firstChild) {\r\n        this.contentEl.appendChild(this.el.firstChild);\r\n      }\r\n\r\n      this.contentWrapperEl.appendChild(this.contentEl);\r\n      this.offsetEl.appendChild(this.contentWrapperEl);\r\n      this.maskEl.appendChild(this.offsetEl);\r\n      this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl);\r\n      this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl);\r\n      this.wrapperEl.appendChild(this.maskEl);\r\n      this.wrapperEl.appendChild(this.placeholderEl);\r\n      this.el.appendChild(this.wrapperEl);\r\n    }\r\n\r\n    if (!this.axis.x.track.el || !this.axis.y.track.el) {\r\n      const track = document.createElement('div');\r\n      const scrollbar = document.createElement('div');\r\n\r\n      track.classList.add(this.classNames.track);\r\n      scrollbar.classList.add(this.classNames.scrollbar);\r\n\r\n      track.appendChild(scrollbar);\r\n\r\n      this.axis.x.track.el = track.cloneNode(true);\r\n      this.axis.x.track.el.classList.add(this.classNames.horizontal);\r\n\r\n      this.axis.y.track.el = track.cloneNode(true);\r\n      this.axis.y.track.el.classList.add(this.classNames.vertical);\r\n\r\n      this.el.appendChild(this.axis.x.track.el);\r\n      this.el.appendChild(this.axis.y.track.el);\r\n    }\r\n\r\n    this.axis.x.scrollbar.el = this.axis.x.track.el.querySelector(\r\n      `.${this.classNames.scrollbar}`\r\n    );\r\n    this.axis.y.scrollbar.el = this.axis.y.track.el.querySelector(\r\n      `.${this.classNames.scrollbar}`\r\n    );\r\n\r\n    if (!this.options.autoHide) {\r\n      this.axis.x.scrollbar.el.classList.add(this.classNames.visible);\r\n      this.axis.y.scrollbar.el.classList.add(this.classNames.visible);\r\n    }\r\n\r\n    this.el.setAttribute('data-simplebar', 'init');\r\n  }\r\n\r\n  initListeners() {\r\n    const elWindow = getElementWindow(this.el);\r\n    // Event listeners\r\n    if (this.options.autoHide) {\r\n      this.el.addEventListener('mouseenter', this.onMouseEnter);\r\n    }\r\n\r\n    ['mousedown', 'click', 'dblclick'].forEach(e => {\r\n      this.el.addEventListener(e, this.onPointerEvent, true);\r\n    });\r\n\r\n    ['touchstart', 'touchend', 'touchmove'].forEach(e => {\r\n      this.el.addEventListener(e, this.onPointerEvent, {\r\n        capture: true,\r\n        passive: true\r\n      });\r\n    });\r\n\r\n    this.el.addEventListener('mousemove', this.onMouseMove);\r\n    this.el.addEventListener('mouseleave', this.onMouseLeave);\r\n\r\n    this.contentWrapperEl.addEventListener('scroll', this.onScroll);\r\n\r\n    // Browser zoom triggers a window resize\r\n    elWindow.addEventListener('resize', this.onWindowResize);\r\n\r\n    // Hack for https://github.com/WICG/ResizeObserver/issues/38\r\n    let resizeObserverStarted = false;\r\n    const resizeObserver = elWindow.ResizeObserver || ResizeObserver;\r\n    this.resizeObserver = new resizeObserver(() => {\r\n      if (!resizeObserverStarted) return;\r\n      this.recalculate();\r\n    });\r\n\r\n    this.resizeObserver.observe(this.el);\r\n    this.resizeObserver.observe(this.contentEl);\r\n\r\n    elWindow.requestAnimationFrame(() => {\r\n      resizeObserverStarted = true;\r\n    });\r\n\r\n    // This is required to detect horizontal scroll. Vertical scroll only needs the resizeObserver.\r\n    this.mutationObserver = new elWindow.MutationObserver(this.recalculate);\r\n\r\n    this.mutationObserver.observe(this.contentEl, {\r\n      childList: true,\r\n      subtree: true,\r\n      characterData: true\r\n    });\r\n  }\r\n\r\n  recalculate() {\r\n    const elWindow = getElementWindow(this.el);\r\n    this.elStyles = elWindow.getComputedStyle(this.el);\r\n    this.isRtl = this.elStyles.direction === 'rtl';\r\n\r\n    const isHeightAuto = this.heightAutoObserverEl.offsetHeight <= 1;\r\n    const isWidthAuto = this.heightAutoObserverEl.offsetWidth <= 1;\r\n    const contentElOffsetWidth = this.contentEl.offsetWidth;\r\n\r\n    const contentWrapperElOffsetWidth = this.contentWrapperEl.offsetWidth;\r\n\r\n    const elOverflowX = this.elStyles.overflowX;\r\n    const elOverflowY = this.elStyles.overflowY;\r\n\r\n    this.contentEl.style.padding = `${this.elStyles.paddingTop} ${this.elStyles.paddingRight} ${this.elStyles.paddingBottom} ${this.elStyles.paddingLeft}`;\r\n    this.wrapperEl.style.margin = `-${this.elStyles.paddingTop} -${this.elStyles.paddingRight} -${this.elStyles.paddingBottom} -${this.elStyles.paddingLeft}`;\r\n\r\n    const contentElScrollHeight = this.contentEl.scrollHeight;\r\n    const contentElScrollWidth = this.contentEl.scrollWidth;\r\n\r\n    this.contentWrapperEl.style.height = isHeightAuto ? 'auto' : '100%';\r\n\r\n    // Determine placeholder size\r\n    this.placeholderEl.style.width = isWidthAuto\r\n      ? `${contentElOffsetWidth}px`\r\n      : 'auto';\r\n    this.placeholderEl.style.height = `${contentElScrollHeight}px`;\r\n\r\n    const contentWrapperElOffsetHeight = this.contentWrapperEl.offsetHeight;\r\n\r\n    this.axis.x.isOverflowing = contentElScrollWidth > contentElOffsetWidth;\r\n    this.axis.y.isOverflowing =\r\n      contentElScrollHeight > contentWrapperElOffsetHeight;\r\n\r\n    // Set isOverflowing to false if user explicitely set hidden overflow\r\n    this.axis.x.isOverflowing =\r\n      elOverflowX === 'hidden' ? false : this.axis.x.isOverflowing;\r\n    this.axis.y.isOverflowing =\r\n      elOverflowY === 'hidden' ? false : this.axis.y.isOverflowing;\r\n\r\n    this.axis.x.forceVisible =\r\n      this.options.forceVisible === 'x' || this.options.forceVisible === true;\r\n    this.axis.y.forceVisible =\r\n      this.options.forceVisible === 'y' || this.options.forceVisible === true;\r\n\r\n    this.hideNativeScrollbar();\r\n\r\n    // Set isOverflowing to false if scrollbar is not necessary (content is shorter than offset)\r\n    let offsetForXScrollbar = this.axis.x.isOverflowing\r\n      ? this.scrollbarWidth\r\n      : 0;\r\n    let offsetForYScrollbar = this.axis.y.isOverflowing\r\n      ? this.scrollbarWidth\r\n      : 0;\r\n\r\n    this.axis.x.isOverflowing =\r\n      this.axis.x.isOverflowing &&\r\n      contentElScrollWidth > contentWrapperElOffsetWidth - offsetForYScrollbar;\r\n    this.axis.y.isOverflowing =\r\n      this.axis.y.isOverflowing &&\r\n      contentElScrollHeight >\r\n        contentWrapperElOffsetHeight - offsetForXScrollbar;\r\n\r\n    this.axis.x.scrollbar.size = this.getScrollbarSize('x');\r\n    this.axis.y.scrollbar.size = this.getScrollbarSize('y');\r\n\r\n    this.axis.x.scrollbar.el.style.width = `${this.axis.x.scrollbar.size}px`;\r\n    this.axis.y.scrollbar.el.style.height = `${this.axis.y.scrollbar.size}px`;\r\n\r\n    this.positionScrollbar('x');\r\n    this.positionScrollbar('y');\r\n\r\n    this.toggleTrackVisibility('x');\r\n    this.toggleTrackVisibility('y');\r\n  }\r\n\r\n  /**\r\n   * Calculate scrollbar size\r\n   */\r\n  getScrollbarSize(axis = 'y') {\r\n    if (!this.axis[axis].isOverflowing) {\r\n      return 0;\r\n    }\r\n\r\n    const contentSize = this.contentEl[this.axis[axis].scrollSizeAttr];\r\n    const trackSize = this.axis[axis].track.el[this.axis[axis].offsetSizeAttr];\r\n    let scrollbarSize;\r\n\r\n    let scrollbarRatio = trackSize / contentSize;\r\n\r\n    // Calculate new height/position of drag handle.\r\n    scrollbarSize = Math.max(\r\n      ~~(scrollbarRatio * trackSize),\r\n      this.options.scrollbarMinSize\r\n    );\r\n\r\n    if (this.options.scrollbarMaxSize) {\r\n      scrollbarSize = Math.min(scrollbarSize, this.options.scrollbarMaxSize);\r\n    }\r\n\r\n    return scrollbarSize;\r\n  }\r\n\r\n  positionScrollbar(axis = 'y') {\r\n    if (!this.axis[axis].isOverflowing) {\r\n      return;\r\n    }\r\n\r\n    const contentSize = this.contentWrapperEl[this.axis[axis].scrollSizeAttr];\r\n    const trackSize = this.axis[axis].track.el[this.axis[axis].offsetSizeAttr];\r\n    const hostSize = parseInt(this.elStyles[this.axis[axis].sizeAttr], 10);\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n\r\n    let scrollOffset = this.contentWrapperEl[this.axis[axis].scrollOffsetAttr];\r\n    scrollOffset =\r\n      axis === 'x' &&\r\n      this.isRtl &&\r\n      SimpleBar.getRtlHelpers().isRtlScrollingInverted\r\n        ? -scrollOffset\r\n        : scrollOffset;\r\n    let scrollPourcent = scrollOffset / (contentSize - hostSize);\r\n\r\n    let handleOffset = ~~((trackSize - scrollbar.size) * scrollPourcent);\r\n    handleOffset =\r\n      axis === 'x' &&\r\n      this.isRtl &&\r\n      SimpleBar.getRtlHelpers().isRtlScrollbarInverted\r\n        ? handleOffset + (trackSize - scrollbar.size)\r\n        : handleOffset;\r\n\r\n    scrollbar.el.style.transform =\r\n      axis === 'x'\r\n        ? `translate3d(${handleOffset}px, 0, 0)`\r\n        : `translate3d(0, ${handleOffset}px, 0)`;\r\n  }\r\n\r\n  toggleTrackVisibility(axis = 'y') {\r\n    const track = this.axis[axis].track.el;\r\n    const scrollbar = this.axis[axis].scrollbar.el;\r\n\r\n    if (this.axis[axis].isOverflowing || this.axis[axis].forceVisible) {\r\n      track.style.visibility = 'visible';\r\n      this.contentWrapperEl.style[this.axis[axis].overflowAttr] = 'scroll';\r\n    } else {\r\n      track.style.visibility = 'hidden';\r\n      this.contentWrapperEl.style[this.axis[axis].overflowAttr] = 'hidden';\r\n    }\r\n\r\n    // Even if forceVisible is enabled, scrollbar itself should be hidden\r\n    if (this.axis[axis].isOverflowing) {\r\n      scrollbar.style.display = 'block';\r\n    } else {\r\n      scrollbar.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  hideNativeScrollbar() {\r\n    this.offsetEl.style[this.isRtl ? 'left' : 'right'] =\r\n      this.axis.y.isOverflowing || this.axis.y.forceVisible\r\n        ? `-${this.scrollbarWidth}px`\r\n        : 0;\r\n    this.offsetEl.style.bottom =\r\n      this.axis.x.isOverflowing || this.axis.x.forceVisible\r\n        ? `-${this.scrollbarWidth}px`\r\n        : 0;\r\n  }\r\n\r\n  /**\r\n   * On scroll event handling\r\n   */\r\n  onScroll = () => {\r\n    const elWindow = getElementWindow(this.el);\r\n    if (!this.scrollXTicking) {\r\n      elWindow.requestAnimationFrame(this.scrollX);\r\n      this.scrollXTicking = true;\r\n    }\r\n\r\n    if (!this.scrollYTicking) {\r\n      elWindow.requestAnimationFrame(this.scrollY);\r\n      this.scrollYTicking = true;\r\n    }\r\n  };\r\n\r\n  scrollX = () => {\r\n    if (this.axis.x.isOverflowing) {\r\n      this.showScrollbar('x');\r\n      this.positionScrollbar('x');\r\n    }\r\n\r\n    this.scrollXTicking = false;\r\n  };\r\n\r\n  scrollY = () => {\r\n    if (this.axis.y.isOverflowing) {\r\n      this.showScrollbar('y');\r\n      this.positionScrollbar('y');\r\n    }\r\n\r\n    this.scrollYTicking = false;\r\n  };\r\n\r\n  onMouseEnter = () => {\r\n    this.showScrollbar('x');\r\n    this.showScrollbar('y');\r\n  };\r\n\r\n  onMouseMove = e => {\r\n    this.mouseX = e.clientX;\r\n    this.mouseY = e.clientY;\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      this.onMouseMoveForAxis('x');\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      this.onMouseMoveForAxis('y');\r\n    }\r\n  };\r\n\r\n  onMouseMoveForAxis(axis = 'y') {\r\n    this.axis[axis].track.rect = this.axis[\r\n      axis\r\n    ].track.el.getBoundingClientRect();\r\n    this.axis[axis].scrollbar.rect = this.axis[\r\n      axis\r\n    ].scrollbar.el.getBoundingClientRect();\r\n\r\n    const isWithinScrollbarBoundsX = this.isWithinBounds(\r\n      this.axis[axis].scrollbar.rect\r\n    );\r\n\r\n    if (isWithinScrollbarBoundsX) {\r\n      this.axis[axis].scrollbar.el.classList.add(this.classNames.hover);\r\n    } else {\r\n      this.axis[axis].scrollbar.el.classList.remove(this.classNames.hover);\r\n    }\r\n\r\n    if (this.isWithinBounds(this.axis[axis].track.rect)) {\r\n      this.showScrollbar(axis);\r\n      this.axis[axis].track.el.classList.add(this.classNames.hover);\r\n    } else {\r\n      this.axis[axis].track.el.classList.remove(this.classNames.hover);\r\n    }\r\n  }\r\n\r\n  onMouseLeave = () => {\r\n    this.onMouseMove.cancel();\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      this.onMouseLeaveForAxis('x');\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      this.onMouseLeaveForAxis('y');\r\n    }\r\n\r\n    this.mouseX = -1;\r\n    this.mouseY = -1;\r\n  };\r\n\r\n  onMouseLeaveForAxis(axis = 'y') {\r\n    this.axis[axis].track.el.classList.remove(this.classNames.hover);\r\n    this.axis[axis].scrollbar.el.classList.remove(this.classNames.hover);\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    // Recalculate scrollbarWidth in case it's a zoom\r\n    this.scrollbarWidth = this.getScrollbarWidth();\r\n\r\n    this.hideNativeScrollbar();\r\n  };\r\n\r\n  /**\r\n   * Show scrollbar\r\n   */\r\n  showScrollbar(axis = 'y') {\r\n    let scrollbar = this.axis[axis].scrollbar.el;\r\n\r\n    if (!this.axis[axis].isVisible) {\r\n      scrollbar.classList.add(this.classNames.visible);\r\n      this.axis[axis].isVisible = true;\r\n    }\r\n\r\n    if (this.options.autoHide) {\r\n      this.hideScrollbars();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide Scrollbar\r\n   */\r\n  hideScrollbars = () => {\r\n    this.axis.x.track.rect = this.axis.x.track.el.getBoundingClientRect();\r\n    this.axis.y.track.rect = this.axis.y.track.el.getBoundingClientRect();\r\n\r\n    if (!this.isWithinBounds(this.axis.y.track.rect)) {\r\n      this.axis.y.scrollbar.el.classList.remove(this.classNames.visible);\r\n      this.axis.y.isVisible = false;\r\n    }\r\n\r\n    if (!this.isWithinBounds(this.axis.x.track.rect)) {\r\n      this.axis.x.scrollbar.el.classList.remove(this.classNames.visible);\r\n      this.axis.x.isVisible = false;\r\n    }\r\n  };\r\n\r\n  onPointerEvent = e => {\r\n    let isWithinTrackXBounds, isWithinTrackYBounds;\r\n\r\n    this.axis.x.track.rect = this.axis.x.track.el.getBoundingClientRect();\r\n    this.axis.y.track.rect = this.axis.y.track.el.getBoundingClientRect();\r\n\r\n    if (this.axis.x.isOverflowing || this.axis.x.forceVisible) {\r\n      isWithinTrackXBounds = this.isWithinBounds(this.axis.x.track.rect);\r\n    }\r\n\r\n    if (this.axis.y.isOverflowing || this.axis.y.forceVisible) {\r\n      isWithinTrackYBounds = this.isWithinBounds(this.axis.y.track.rect);\r\n    }\r\n\r\n    // If any pointer event is called on the scrollbar\r\n    if (isWithinTrackXBounds || isWithinTrackYBounds) {\r\n      // Preventing the event's default action stops text being\r\n      // selectable during the drag.\r\n      e.preventDefault();\r\n      // Prevent event leaking\r\n      e.stopPropagation();\r\n\r\n      if (e.type === 'mousedown') {\r\n        if (isWithinTrackXBounds) {\r\n          this.axis.x.scrollbar.rect = this.axis.x.scrollbar.el.getBoundingClientRect();\r\n\r\n          if (this.isWithinBounds(this.axis.x.scrollbar.rect)) {\r\n            this.onDragStart(e, 'x');\r\n          } else {\r\n            this.onTrackClick(e, 'x');\r\n          }\r\n        }\r\n\r\n        if (isWithinTrackYBounds) {\r\n          this.axis.y.scrollbar.rect = this.axis.y.scrollbar.el.getBoundingClientRect();\r\n\r\n          if (this.isWithinBounds(this.axis.y.scrollbar.rect)) {\r\n            this.onDragStart(e, 'y');\r\n          } else {\r\n            this.onTrackClick(e, 'y');\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * on scrollbar handle drag movement starts\r\n   */\r\n  onDragStart(e, axis = 'y') {\r\n    const elDocument = getElementDocument(this.el);\r\n    const elWindow = getElementWindow(this.el);\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n\r\n    // Measure how far the user's mouse is from the top of the scrollbar drag handle.\r\n    const eventOffset = axis === 'y' ? e.pageY : e.pageX;\r\n    this.axis[axis].dragOffset =\r\n      eventOffset - scrollbar.rect[this.axis[axis].offsetAttr];\r\n    this.draggedAxis = axis;\r\n\r\n    this.el.classList.add(this.classNames.dragging);\r\n\r\n    elDocument.addEventListener('mousemove', this.drag, true);\r\n    elDocument.addEventListener('mouseup', this.onEndDrag, true);\r\n    if (this.removePreventClickId === null) {\r\n      elDocument.addEventListener('click', this.preventClick, true);\r\n      elDocument.addEventListener('dblclick', this.preventClick, true);\r\n    } else {\r\n      elWindow.clearTimeout(this.removePreventClickId);\r\n      this.removePreventClickId = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Drag scrollbar handle\r\n   */\r\n  drag = e => {\r\n    let eventOffset;\r\n    const track = this.axis[this.draggedAxis].track;\r\n    const trackSize = track.rect[this.axis[this.draggedAxis].sizeAttr];\r\n    const scrollbar = this.axis[this.draggedAxis].scrollbar;\r\n    const contentSize = this.contentWrapperEl[\r\n      this.axis[this.draggedAxis].scrollSizeAttr\r\n    ];\r\n    const hostSize = parseInt(\r\n      this.elStyles[this.axis[this.draggedAxis].sizeAttr],\r\n      10\r\n    );\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (this.draggedAxis === 'y') {\r\n      eventOffset = e.pageY;\r\n    } else {\r\n      eventOffset = e.pageX;\r\n    }\r\n\r\n    // Calculate how far the user's mouse is from the top/left of the scrollbar (minus the dragOffset).\r\n    let dragPos =\r\n      eventOffset -\r\n      track.rect[this.axis[this.draggedAxis].offsetAttr] -\r\n      this.axis[this.draggedAxis].dragOffset;\r\n    // Convert the mouse position into a percentage of the scrollbar height/width.\r\n    let dragPerc = dragPos / (trackSize - scrollbar.size);\r\n\r\n    // Scroll the content by the same percentage.\r\n    let scrollPos = dragPerc * (contentSize - hostSize);\r\n\r\n    // Fix browsers inconsistency on RTL\r\n    if (this.draggedAxis === 'x') {\r\n      scrollPos =\r\n        this.isRtl && SimpleBar.getRtlHelpers().isRtlScrollbarInverted\r\n          ? scrollPos - (trackSize + scrollbar.size)\r\n          : scrollPos;\r\n      scrollPos =\r\n        this.isRtl && SimpleBar.getRtlHelpers().isRtlScrollingInverted\r\n          ? -scrollPos\r\n          : scrollPos;\r\n    }\r\n\r\n    this.contentWrapperEl[\r\n      this.axis[this.draggedAxis].scrollOffsetAttr\r\n    ] = scrollPos;\r\n  };\r\n\r\n  /**\r\n   * End scroll handle drag\r\n   */\r\n  onEndDrag = e => {\r\n    const elDocument = getElementDocument(this.el);\r\n    const elWindow = getElementWindow(this.el);\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.el.classList.remove(this.classNames.dragging);\r\n\r\n    elDocument.removeEventListener('mousemove', this.drag, true);\r\n    elDocument.removeEventListener('mouseup', this.onEndDrag, true);\r\n    this.removePreventClickId = elWindow.setTimeout(() => {\r\n      // Remove these asynchronously so we still suppress click events\r\n      // generated simultaneously with mouseup.\r\n      elDocument.removeEventListener('click', this.preventClick, true);\r\n      elDocument.removeEventListener('dblclick', this.preventClick, true);\r\n      this.removePreventClickId = null;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Handler to ignore click events during drag\r\n   */\r\n  preventClick = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  onTrackClick(e, axis = 'y') {\r\n    if (!this.options.clickOnTrack) return;\r\n\r\n    const elWindow = getElementWindow(this.el);\r\n    this.axis[axis].scrollbar.rect = this.axis[\r\n      axis\r\n    ].scrollbar.el.getBoundingClientRect();\r\n    const scrollbar = this.axis[axis].scrollbar;\r\n    const scrollbarOffset = scrollbar.rect[this.axis[axis].offsetAttr];\r\n    const hostSize = parseInt(this.elStyles[this.axis[axis].sizeAttr], 10);\r\n    let scrolled = this.contentWrapperEl[this.axis[axis].scrollOffsetAttr];\r\n    const t =\r\n      axis === 'y'\r\n        ? this.mouseY - scrollbarOffset\r\n        : this.mouseX - scrollbarOffset;\r\n    const dir = t < 0 ? -1 : 1;\r\n    const scrollSize = dir === -1 ? scrolled - hostSize : scrolled + hostSize;\r\n\r\n    const scrollTo = () => {\r\n      if (dir === -1) {\r\n        if (scrolled > scrollSize) {\r\n          scrolled -= this.options.clickOnTrackSpeed;\r\n          this.contentWrapperEl.scrollTo({\r\n            [this.axis[axis].offsetAttr]: scrolled\r\n          });\r\n          elWindow.requestAnimationFrame(scrollTo);\r\n        }\r\n      } else {\r\n        if (scrolled < scrollSize) {\r\n          scrolled += this.options.clickOnTrackSpeed;\r\n          this.contentWrapperEl.scrollTo({\r\n            [this.axis[axis].offsetAttr]: scrolled\r\n          });\r\n          elWindow.requestAnimationFrame(scrollTo);\r\n        }\r\n      }\r\n    };\r\n\r\n    scrollTo();\r\n  }\r\n\r\n  /**\r\n   * Getter for content element\r\n   */\r\n  getContentElement() {\r\n    return this.contentEl;\r\n  }\r\n\r\n  /**\r\n   * Getter for original scrolling element\r\n   */\r\n  getScrollElement() {\r\n    return this.contentWrapperEl;\r\n  }\r\n\r\n  getScrollbarWidth() {\r\n    // Try/catch for FF 56 throwing on undefined computedStyles\r\n    try {\r\n      // Detect browsers supporting CSS scrollbar styling and do not calculate\r\n      if (\r\n        getComputedStyle(this.contentWrapperEl, '::-webkit-scrollbar')\r\n          .display === 'none' ||\r\n        'scrollbarWidth' in document.documentElement.style ||\r\n        '-ms-overflow-style' in document.documentElement.style\r\n      ) {\r\n        return 0;\r\n      } else {\r\n        return scrollbarWidth(this.el);\r\n      }\r\n    } catch (e) {\r\n      return scrollbarWidth(this.el);\r\n    }\r\n  }\r\n\r\n  removeListeners() {\r\n    const elWindow = getElementWindow(this.el);\r\n    // Event listeners\r\n    if (this.options.autoHide) {\r\n      this.el.removeEventListener('mouseenter', this.onMouseEnter);\r\n    }\r\n\r\n    ['mousedown', 'click', 'dblclick'].forEach(e => {\r\n      this.el.removeEventListener(e, this.onPointerEvent, true);\r\n    });\r\n\r\n    ['touchstart', 'touchend', 'touchmove'].forEach(e => {\r\n      this.el.removeEventListener(e, this.onPointerEvent, {\r\n        capture: true,\r\n        passive: true\r\n      });\r\n    });\r\n\r\n    this.el.removeEventListener('mousemove', this.onMouseMove);\r\n    this.el.removeEventListener('mouseleave', this.onMouseLeave);\r\n\r\n    if (this.contentWrapperEl) {\r\n      this.contentWrapperEl.removeEventListener('scroll', this.onScroll);\r\n    }\r\n\r\n    elWindow.removeEventListener('resize', this.onWindowResize);\r\n\r\n    if (this.mutationObserver) {\r\n      this.mutationObserver.disconnect();\r\n    }\r\n\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n    }\r\n\r\n    // Cancel all debounced functions\r\n    this.recalculate.cancel();\r\n    this.onMouseMove.cancel();\r\n    this.hideScrollbars.cancel();\r\n    this.onWindowResize.cancel();\r\n  }\r\n\r\n  /**\r\n   * UnMount mutation observer and delete SimpleBar instance from DOM element\r\n   */\r\n  unMount() {\r\n    this.removeListeners();\r\n    SimpleBar.instances.delete(this.el);\r\n  }\r\n\r\n  /**\r\n   * Check if mouse is within bounds\r\n   */\r\n  isWithinBounds(bbox) {\r\n    return (\r\n      this.mouseX >= bbox.left &&\r\n      this.mouseX <= bbox.left + bbox.width &&\r\n      this.mouseY >= bbox.top &&\r\n      this.mouseY <= bbox.top + bbox.height\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Find element children matches query\r\n   */\r\n  findChild(el, query) {\r\n    const matches =\r\n      el.matches ||\r\n      el.webkitMatchesSelector ||\r\n      el.mozMatchesSelector ||\r\n      el.msMatchesSelector;\r\n    return Array.prototype.filter.call(el.children, child =>\r\n      matches.call(child, query)\r\n    )[0];\r\n  }\r\n}\r\n","import canUseDOM from 'can-use-dom';\r\n\r\nimport SimpleBar from './simplebar';\r\nimport { getOptions } from './helpers';\r\n\r\nSimpleBar.initDOMLoadedElements = function() {\r\n  document.removeEventListener('DOMContentLoaded', this.initDOMLoadedElements);\r\n  window.removeEventListener('load', this.initDOMLoadedElements);\r\n\r\n  Array.prototype.forEach.call(\r\n    document.querySelectorAll('[data-simplebar]'),\r\n    el => {\r\n      if (\r\n        el.getAttribute('data-simplebar') !== 'init' &&\r\n        !SimpleBar.instances.has(el)\r\n      )\r\n        new SimpleBar(el, getOptions(el.attributes));\r\n    }\r\n  );\r\n};\r\n\r\nSimpleBar.removeObserver = function() {\r\n  this.globalObserver.disconnect();\r\n};\r\n\r\nSimpleBar.initHtmlApi = function() {\r\n  this.initDOMLoadedElements = this.initDOMLoadedElements.bind(this);\r\n\r\n  // MutationObserver is IE11+\r\n  if (typeof MutationObserver !== 'undefined') {\r\n    // Mutation observer to observe dynamically added elements\r\n    this.globalObserver = new MutationObserver(SimpleBar.handleMutations);\r\n\r\n    this.globalObserver.observe(document, { childList: true, subtree: true });\r\n  }\r\n\r\n  // Taken from jQuery `ready` function\r\n  // Instantiate elements already present on the page\r\n  if (\r\n    document.readyState === 'complete' ||\r\n    (document.readyState !== 'loading' && !document.documentElement.doScroll)\r\n  ) {\r\n    // Handle it asynchronously to allow scripts the opportunity to delay init\r\n    window.setTimeout(this.initDOMLoadedElements);\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', this.initDOMLoadedElements);\r\n    window.addEventListener('load', this.initDOMLoadedElements);\r\n  }\r\n};\r\n\r\nSimpleBar.handleMutations = mutations => {\r\n  mutations.forEach(mutation => {\r\n    Array.prototype.forEach.call(mutation.addedNodes, addedNode => {\r\n      if (addedNode.nodeType === 1) {\r\n        if (addedNode.hasAttribute('data-simplebar')) {\r\n          !SimpleBar.instances.has(addedNode) &&\r\n            new SimpleBar(addedNode, getOptions(addedNode.attributes));\r\n        } else {\r\n          Array.prototype.forEach.call(\r\n            addedNode.querySelectorAll('[data-simplebar]'),\r\n            function(el) {\r\n              if (\r\n                el.getAttribute('data-simplebar') !== 'init' &&\r\n                !SimpleBar.instances.has(el)\r\n              )\r\n                new SimpleBar(el, getOptions(el.attributes));\r\n            }\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    Array.prototype.forEach.call(mutation.removedNodes, removedNode => {\r\n      if (removedNode.nodeType === 1) {\r\n        if (removedNode.hasAttribute('[data-simplebar=\"init\"]')) {\r\n          SimpleBar.instances.has(removedNode) &&\r\n            SimpleBar.instances.get(removedNode).unMount();\r\n        } else {\r\n          Array.prototype.forEach.call(\r\n            removedNode.querySelectorAll('[data-simplebar=\"init\"]'),\r\n            el => {\r\n              SimpleBar.instances.has(el) &&\r\n                SimpleBar.instances.get(el).unMount();\r\n            }\r\n          );\r\n        }\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nSimpleBar.getOptions = getOptions;\r\n\r\n/**\r\n * HTML API\r\n * Called only in a browser env.\r\n */\r\nif (canUseDOM) {\r\n  SimpleBar.initHtmlApi();\r\n}\r\n\r\nexport default SimpleBar;\r\n"],"names":["getOptions","obj","options","Array","prototype","reduce","call","acc","attribute","option","name","match","key","replace","x","chr","toUpperCase","value","undefined","getElementWindow","element","ownerDocument","defaultView","window","getElementDocument","document","cachedScrollbarWidth","cachedDevicePixelRatio","canUseDOM","addEventListener","devicePixelRatio","scrollbarWidth","el","body","box","createElement","classList","add","appendChild","width","getBoundingClientRect","right","removeChild","SimpleBar","onScroll","elWindow","scrollXTicking","requestAnimationFrame","scrollX","scrollYTicking","scrollY","axis","isOverflowing","showScrollbar","positionScrollbar","y","onMouseEnter","onMouseMove","e","mouseX","clientX","mouseY","clientY","forceVisible","onMouseMoveForAxis","onMouseLeave","cancel","onMouseLeaveForAxis","onWindowResize","getScrollbarWidth","hideNativeScrollbar","hideScrollbars","track","rect","isWithinBounds","scrollbar","remove","classNames","visible","isVisible","onPointerEvent","isWithinTrackXBounds","isWithinTrackYBounds","preventDefault","stopPropagation","type","onDragStart","onTrackClick","drag","eventOffset","draggedAxis","trackSize","sizeAttr","contentSize","contentWrapperEl","scrollSizeAttr","hostSize","parseInt","elStyles","pageY","pageX","dragPos","offsetAttr","dragOffset","dragPerc","size","scrollPos","isRtl","getRtlHelpers","isRtlScrollbarInverted","isRtlScrollingInverted","scrollOffsetAttr","onEndDrag","elDocument","dragging","removeEventListener","removePreventClickId","setTimeout","preventClick","minScrollbarWidth","defaultOptions","offsetSizeAttr","overflowAttr","instances","has","recalculate","throttle","bind","recalculateThrottleWaitTime","debounce","timeout","leading","memoize","init","dummyDiv","innerHTML","scrollbarDummyEl","firstElementChild","dummyContainerChild","scrollLeft","dummyContainerOffset","getOffset","dummyContainerChildOffset","dummyContainerScrollOffsetAfterScroll","left","top","pageYOffset","documentElement","scrollTop","pageXOffset","set","initDOM","initListeners","filter","children","child","contains","wrapper","length","wrapperEl","querySelector","scrollableNode","contentWrapper","contentEl","contentNode","offsetEl","offset","maskEl","mask","placeholderEl","findChild","placeholder","heightAutoObserverWrapperEl","heightAutoObserverEl","horizontal","vertical","firstChild","cloneNode","autoHide","setAttribute","forEach","capture","passive","resizeObserverStarted","resizeObserver","ResizeObserver","observe","mutationObserver","MutationObserver","childList","subtree","characterData","getComputedStyle","direction","isHeightAuto","offsetHeight","isWidthAuto","offsetWidth","contentElOffsetWidth","contentWrapperElOffsetWidth","elOverflowX","overflowX","elOverflowY","overflowY","style","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","contentElScrollHeight","scrollHeight","contentElScrollWidth","scrollWidth","height","contentWrapperElOffsetHeight","offsetForXScrollbar","offsetForYScrollbar","getScrollbarSize","toggleTrackVisibility","scrollbarSize","scrollbarRatio","Math","max","scrollbarMinSize","scrollbarMaxSize","min","scrollOffset","scrollPourcent","handleOffset","transform","visibility","display","bottom","isWithinScrollbarBoundsX","hover","clearTimeout","clickOnTrack","scrollbarOffset","scrolled","t","dir","scrollSize","scrollTo","clickOnTrackSpeed","getContentElement","getScrollElement","removeListeners","disconnect","unMount","delete","bbox","query","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","WeakMap","initDOMLoadedElements","querySelectorAll","getAttribute","attributes","removeObserver","globalObserver","initHtmlApi","handleMutations","readyState","doScroll","mutations","mutation","addedNodes","addedNode","nodeType","hasAttribute","removedNodes","removedNode","get"],"mappings":"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"}